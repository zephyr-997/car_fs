

## 寻迹算法





## 基本差比和加权算法公式

对于四电感布置（左L、左中LM、右中RM、右R）的电磁循迹小车，差比和加权算法的标准数学表达式为：
$$
\text{err} = \left( \frac{A \cdot (L-R)}{L+R} + \frac{B \cdot (LM-RM)}{LM+RM} \right) \cdot P
$$
其中：

$L, R, LM, RM$ 是四个电感的归一化值

$A, B$ 是水平电感对和垂直电感对的权重系数

$P$ 是位置比例系数（通常为100，将结果映射到-100到100范围）

## 与给定形式相似的差比和加权算法公式

按照您提供的形式，可以将差比和加权算法表示为：
$$
\text{err} = \frac{A \cdot (L-R) + B \cdot (LM-RM)}{C \cdot (L+R) + D \cdot |LM+RM|} \cdot P
$$
这种形式的特点是：

分子包含两对电感的加权差值之和

分母包含两对电感的加权和值之和

整体乘以比例系数P

## 常见变体形式

### 1. 标准差比和加权（最常用）

$$
\text{err} = \left( W_1 \cdot \frac{L-R}{L+R} + W_2 \cdot \frac{LM-RM}{LM+RM} \right) \cdot 100
$$

其中 $W_1 + W_2 = 1$，通常 $W_1 = 0.7, W_2 = 0.3$



//  标准差比和加权（最常用）

//                                                A⋅(L−R)    B⋅(LM−RM)  

//  ERR  =  ( —————————— + —————————— ) * P

//                                               L + R     LM + RM

表示左右通道的归一化差值  表示左右中置通道的归一化差值  P 为全局比例系数

| 标准差比和加权 | 简单直观，计算量小 | 一般赛道，直道和缓弯 |

### 2. 综合差比和（您提供的形式）

$$
\text{err} = \frac{A \cdot (L-R) + B \cdot (LM-RM)}{C \cdot (L+R) + D \cdot |LM+RM|} \cdot P
$$

通常 $A > B$，$C > D$，$P = 100$

| 综合差比和 | 考虑所有电感的综合影响，分母更稳定 | 复杂赛道，急弯和特殊元素 |

### 3. 加权差值比（适合弯道）

$$
\text{err} = \frac{A \cdot (L-R) + B \cdot (LM-RM)}{A \cdot |L-R| + B \cdot |LM-RM| + \varepsilon} \cdot P
$$

其中 $\varepsilon$ 是小常数，防止分母为零

| 加权差值比 | 对大偏差更敏感，小偏差响应平缓 | 弯道和急转弯 |

### 4. 自适应权重差比和

$$
\text{err} = \left( W(S) \cdot \frac{L-R}{L+R} + (1-W(S)) \cdot \frac{LM-RM}{LM+RM} \right) \cdot 100
$$

其中 $W(S)$ 是基于信号强度 $S$ 的自适应权重函数

| 自适应权重差比和 | 根据信号强度动态调整权重，适应性强 | 变化多样的赛道 |
| ---------------- | ---------------------------------- | -------------- |
|                  |                                    |                |



*//                      L − R           LM − RM* 

*// @自适应权重差比和 式  ERR  =  ( W(S) \*  —————————— + (1 - W(S)) \* —————————— ) \* 100*

*//                      L + R           LM + RM*

*//  其中 W(S)是基于信号强度 S 的自适应权重函数*



### 5. 标准差比和加权算法的变体

$$
\text{position} = \left( W_{L\R} \cdot \frac{L-R}{L+R} + W{LM\RM} \cdot \frac{LM-RM}{LM+RM} \right) \cdot 100
$$

$W_{L\*R}$ 和 $W*{LM\*RM}$ 是动态调整的权重*

$L$, $R$, $LM$, $RM$ 是四个电感的归一化值

 函数使用的是标准差比和加权算法，并通过动态权重调整、赛道类型识别和自适应滤波等方式增强了算法的适应性和稳定性。这种算法在大多数赛道情况下都能表现良好，特别是在处理特殊赛道元素时具有优势